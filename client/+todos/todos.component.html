<div class="row align-center">
  <div class="column small-8">
    <h1>Todos</h1>

    <add-todo></add-todo>
  </div>
</div>

<div class="row align-center">
  <div class="column small-8">
    <div class="callout" *ngFor="let todo of todos">
      <p (click)="updateTodoStatus(todo)"
         [ngClass]="todo.completed ? 'todo-text-completed' : ''">
        {{ todo.contents }}
      </p>

      <form *ngIf="updating === todo"
            (keydown.Escape)="updateTodo(false)"
            (submit)="updateTodo()">
        <input type="text"
               title="Todo contents"
               [(ngModel)]="todoInput"
               (blur)="updateTodo()"
               placeholder="{{ todo.contents }}">
        <p *ngIf="todoInputError" class="help-text">
          The new contents are invalid
        </p>
      </form>
      <p>
        <span class="badge"
              [ngClass]="todo.completed ? 'success' : 'secondary'">
          <i class="fa"
             [ngClass]="todo.completed ? 'fa-check-circle' : 'fa-times-circle'">
          </i>
        </span>
        <span class="button tiny todo-button" (click)="updating = todo">
          Update
        </span>
        <span class="button tiny alert todo-button"
              (click)="removeTodo(todo)">
          Remove
        </span>

        Created {{ todo.updatedAt | humanDiff }}
      </p>
    </div>
  </div>
</div>
